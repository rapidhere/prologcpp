{%- import 'M.twig' as M -%}

template<>
struct {{ M.subFunctorId(functor) }}<
    {%- for const in args -%}
        {{ M.atom(const, context, q[loop.index0]) }},
    {%- endfor -%}
    {{- functor.getItemCount() -}}
> {
    template<int which>
    {% ol %}
    using v = typename at<which
        {% for const in args -%}
        , pack<{{ context.getConstantIndex(const.getInt()) }}>
        {%- endfor -%}
    >::t;
    {% endol %}
};

